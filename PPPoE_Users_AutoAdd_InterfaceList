#In the "On Up:" script line into the PPP Profile the user is connecting to
# where OGE is a variable, depending of the customer.
# The following code will add the interface to the list OGE, automatically when connected.
:delay 2s;
/ppp/active
:foreach userogec in=[find where name~"@tims.oge"] do={
:set $userogec [/ppp/active get $userogec name];
:do {
   /interface/list/member/add list=OGE interface=("<pppoe-$userogec>") 
  :log warning "L'interface $userogec vient de se connecter, ajout à la liste d'interface";
}  on-error={
  :log info "$userogec est déjà ajouté sur la liste d'interface, ignoré ";
}
}


#In the "on Down:" script line into the PPP Profile the user is connecting to
# The following code will remove the interface from the list OGE, automatically when disconnected.

:delay 2s
/interface/list/member
:foreach rmif in=[find where interface~"*F00"] do= {
/interface/list/member set $rmif comment="ByeBye";
:log warning "Deleting disconnected interface from interface Lists";
/interface/list/member remove [find where comment="ByeBye"];
}
